System.register("types",[],function(t,e){"use strict";var n;e&&e.id;return{setters:[],execute:function(){var e;(e=n=n||{}).opacity="opacity",e.scaleX="scaleX",e.scaleY="scaleY",e.scale="scale",e.skewX="skewX",e.skewY="skewY",e.skew="skew",e.rotateX="rotateX",e.rotateY="rotateY",e.rotate="rotate",e.translateX="translateX",e.translateY="translateY",e.translateZ="translateZ",e.blur="blur",e["hue-rotate"]="hue-rotate",e.brightness="brightness",t("cssValues",n)}}}),System.register("lax",[],function(e,t){"use strict";var r,n,i,s,u,l,E,y,I,o,d,a;t&&t.id;function c(e,t){if(Array.isArray(e))return e;for(var n=Object.keys(e).map(function(e){return parseInt(e)}).sort(function(e,t){return t<e?1:-1}),r=n[n.length-1],i=0;i<n.length;i++){var a=n[i];if(t<a){r=a;break}}return e[r]}function f(e,t,n){var r,i=t.width,a=t.height,o=t.x,s=t.y;if("number"==typeof e)return e;if("string"==typeof e){var u=document.body.scrollHeight,l=document.body.scrollWidth,d=window.innerWidth,c=window.innerHeight,f=(r=void 0!==window.pageXOffset,f="CSS1Compat"===(document.compatMode||""),t=r?window.pageXOffset:(f?document.documentElement:document.body).scrollLeft,[r?window.pageYOffset:(f?document.documentElement:document.body).scrollTop,t]),t=o+f[1],o=t+i,s=s+f[0],f=s+a;return Function("return "+e.replace(/screenWidth/g,String(d)).replace(/screenHeight/g,String(c)).replace(/pageHeight/g,String(u)).replace(/pageWidth/g,String(l)).replace(/elWidth/g,String(i)).replace(/elHeight/g,String(a)).replace(/elInY/g,String(s-c)).replace(/elOutY/g,String(f)).replace(/elCenterY/g,String(s+a/2-c/2)).replace(/elInX/g,String(t-d)).replace(/elOutX/g,String(o)).replace(/elCenterX/g,String(t+i/2-d/2)).replace(/index/g,String(n)))()}}return{setters:[],execute:function(){r=function(e){return-1!==["fadeIn","fadeOut","fadeInOut","scaleIn","scaleOut","scaleInOut","slideX","slideY","jiggle","seesaw","zigzag","hueRotate","spin","flipX","flipY","blurIn","blurOut","blurInOut"].indexOf(e)},n=function(e){return["elInY+elHeight","elCenterY-"+(e=void 0===e?30:e),"elCenterY","elCenterY+"+e,"elOutY-elHeight"]},i={fadeInOut:function(e,t){return{opacity:[n(e=void 0===e?30:e),[t=void 0===t?0:t,1,1,1,t]]}},fadeIn:function(e,t){return{opacity:[["elInY+elHeight",e=void 0===e?"elCenterY":e],[t=void 0===t?0:t,1]]}},fadeOut:function(e,t){return{opacity:[[e=void 0===e?"elCenterY":e,"elOutY-elHeight"],[1,t=void 0===t?0:t]]}},blurInOut:function(e,t){return{blur:[n(e=void 0===e?100:e),[t=void 0===t?20:t,0,0,0,t]]}},blurIn:function(e,t){return{blur:[["elInY+elHeight",e=void 0===e?"elCenterY":e],[t=void 0===t?20:t,0]]}},blurOut:function(e,t){return{opacity:[[e=void 0===e?"elCenterY":e,"elOutY-elHeight"],[0,t=void 0===t?20:t]]}},scaleInOut:function(e,t){return{scale:[n(e=void 0===e?100:e),[t=void 0===t?.6:t,1,1,1,t]]}},scaleIn:function(e,t){return{scale:[["elInY+elHeight",e=void 0===e?"elCenterY":e],[t=void 0===t?.6:t,1]]}},scaleOut:function(e,t){return{scale:[[e=void 0===e?"elCenterY":e,"elOutY-elHeight"],[1,t=void 0===t?.6:t]]}},slideX:function(e,t){return{translateX:[["elInY",e=void 0===e?0:e],[0,t=void 0===t?500:t]]}},slideY:function(e,t){return{translateY:[["elInY",e=void 0===e?0:e],[0,t=void 0===t?500:t]]}},spin:function(e,t){return{rotate:[[0,e=void 0===e?1e3:e],[0,t=void 0===t?360:t],{modValue:e}]}},flipX:function(e,t){return{rotateX:[[0,e=void 0===e?1e3:e],[0,t=void 0===t?360:t],{modValue:e}]}},flipY:function(e,t){return{rotateY:[[0,e=void 0===e?1e3:e],[0,t=void 0===t?360:t],{modValue:e}]}},jiggle:function(e,t){return{skewX:[[0,+(e=void 0===e?50:e),2*e,3*e,4*e],[0,t=void 0===t?40:t,0,-t,0],{modValue:4*e}]}},seesaw:function(e,t){return{skewY:[[0,+(e=void 0===e?50:e),2*e,3*e,4*e],[0,t=void 0===t?40:t,0,-t,0],{modValue:4*e}]}},zigzag:function(e,t){return{translateX:[[0,+(e=void 0===e?100:e),2*e,3*e,4*e],[0,t=void 0===t?100:t,0,-t,0],{modValue:4*e}]}},hueRotate:function(e,t){return{"hue-rotate":[[0,e=void 0===e?600:e],[0,t=void 0===t?360:t],{modValue:e}]}}},s=["perspective","scaleX","scaleY","scale","skewX","skewY","skew","rotateX","rotateY","rotate"],u=["blur","hue-rotate","brightness"],l=["translateX","translateY","translateZ"],E=["perspective","border-radius","blur","translateX","translateY","translateZ"],y=["hue-rotate","rotate","rotateX","rotateY","skew","skewX","skewY"],I={easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},easeOutBounce:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInBounce:function(e){return 1-I.easeOutBounce(1-e)},easeOutBack:function(e){return 1+2.70158*Math.pow(e-1,3)+1.70158*Math.pow(e-1,2)},easeInBack:function(e){return 2.70158*e*e*e-1.70158*e*e}},o=function(e,t,n){var r=this;void 0===n&&(n={}),this.name="",this.lastValue=0,this.frameStep=1,this.m1=0,this.m2=0,this.inertia=0,this.inertiaEnabled=!1,this.getValue=function(e){var t=r.lastValue;return e%r.frameStep==0&&(t=r.getValueFn(e)),r.inertiaEnabled&&(e=t-r.lastValue,r.m1=.8*r.m1+e*(1-.8),r.m2=.8*r.m2+r.m1*(1-.8),r.inertia=Math.round(5e3*r.m2)/15e3),r.lastValue=t,[r.lastValue,r.inertia]},this.name=e,this.getValueFn=t,this.inertiaEnabled=n.inertiaEnabled,this.frameStep=n.frameStep,this.lastValue=this.getValueFn(0)},d=function(e,t,n,r,i,a){var Y=this;void 0===i&&(i=0),void 0===a&&(a={}),this.styles={},this.selector="",this.groupIndex=0,this.update=function(e,t){var n,r=Y.transforms,i={};for(n in r){var a=r[n];e[n]||console.error("No lax driver with name: ",n);var o,s,u,l,d,c,f,m,h,v,g=e[n],p=g[0],w=g[1],b=void 0;for(b in a)"presets"!==b&&(o=(d=a[b])[0],s=d[1],u=(f=void 0===(m=d[2])?{}:m).modValue,l=void 0===(c=f.frameStep)?1:c,v=f.easing,d=f.inertia,m=f.inertiaMode,c=f.cssFn,f=void 0===(f=f.cssUnit)?"":f,v=I[v],t%l==0&&(v=function(e,t,n,r){var i=0;if(e.forEach(function(e){e<n&&i++}),i<=0)return t[0];if(i>=e.length)return t[e.length-1];var a,o=(o=e[a=i-1],e=e[i],(n-o)/(e-o));return r&&(o=r(o)),a=t[a],t=t[i],a*(1-(o=o))+t*o}(o,s,u?p%u:p,v),d&&(h=w*d,v+=h="absolute"===m?Math.abs(h):h),h="px"==(m=f||E.includes(b)?"px":y.includes(b)?"deg":"")?0:3,v="px"==m?Number.parseFloat(v.toFixed(h)):v,i[b]=c?c(v,Y.domElement):v+f))}Y.applyStyles(i),Y.onUpdate&&Y.onUpdate(e,Y.domElement)},this.calculateTransforms=function(){Y.transforms={};var t,s=Y.laxInstance.windowWidth;for(t in Y.transformsData)!function(){var a=Y.transformsData[t],i={},e=a.presets;(void 0===e?[]:e).forEach(function(e){var t,n=e.split(":"),r=n[0],i=n[1],e=n[2],n=window.lax.presets[r];n?(t=n(i,e),Object.keys(t).forEach(function(e){a[e]=t[e]})):console.error("Lax preset cannot be found with name: ",r)}),delete a.presets;var o=void 0;for(o in a)!function(){var e,t,n,r;"presets"!==o&&(n=void 0===(r=(e=a[o])[0])?[-1e9,1e9]:r,r=void 0===(r=e[1])?[-1e9,1e9]:r,e=void 0===(e=e[2])?{}:e,t=Y.domElement.getBoundingClientRect(),n=c(n,s).map(function(e){return f(e,t,Y.groupIndex)}),r=c(r,s).map(function(e){return f(e,t,Y.groupIndex)}),i[o]=[n,r,e])}();Y.transforms[t]=i}()},this.applyStyles=function(e){var r,i,a,t=(r=e,i={transform:"",filter:""},a={translateX:1e-5,translateY:1e-5,translateZ:1e-5},Object.keys(r).forEach(function(e){var t=r[e],n=E.includes(e)?"px":y.includes(e)?"deg":"";l.includes(e)?a[e]=t:s.includes(e)?i.transform+=e+"("+t+n+") ":u.includes(e)?i.filter+=e+"("+t+n+") ":i[e]=t+n+" "}),i.transform="translate3d("+a.translateX+"px, "+a.translateY+"px, "+a.translateZ+"px) "+i.transform,i);Object.keys(t).forEach(function(e){Y.domElement.style.setProperty(e,t[e])})},this.selector=e,this.laxInstance=t,this.domElement=n,this.transformsData=r,this.groupIndex=i;var o=void 0===(i=a.style)?{}:i,a=a.onUpdate;Object.keys(o).forEach(function(e){n.style.setProperty(e,o[e])}),a&&(this.onUpdate=a),this.calculateTransforms()},e("laxInstance",a=new function(){var a=this;this.drivers=[],this.elements=[],this.frame=0,this.debug=!1,this.windowWidth=0,this.windowHeight=0,this.presets=i,this.debugData={frameLengths:[],frameStart:0},this.init=function(){a.findAndAddElements(),window.requestAnimationFrame(a.onAnimationFrame),a.windowWidth=document.body.clientWidth,a.windowHeight=document.body.clientHeight,window.onresize=a.onWindowResize},this.onWindowResize=function(){document.body.clientWidth===a.windowWidth&&document.body.clientHeight===a.windowHeight||(a.windowWidth=document.body.clientWidth,a.windowHeight=document.body.clientHeight,a.elements.forEach(function(e){return e.calculateTransforms()}))},this.onAnimationFrame=function(e){a.debug&&(a.debugData.frameStart=Date.now());var t,n={};a.drivers.forEach(function(e){n[e.name]=e.getValue(a.frame)}),a.elements.forEach(function(e){e.update(n,a.frame)}),a.debug&&a.debugData.frameLengths.push(Date.now()-a.debugData.frameStart),a.frame%60==0&&a.debug&&(t=Math.ceil(a.debugData.frameLengths.reduce(function(e,t){return e+t},0)/60),console.log("Average frame calculation time: "+t+"ms"),a.debugData.frameLengths=[]),a.frame++,window.requestAnimationFrame(a.onAnimationFrame)},this.addDriver=function(e,t,n){void 0===n&&(n={}),a.drivers.push(new o(e,t,n))},this.removeDriver=function(t){a.drivers=a.drivers.filter(function(e){return e.name!==t})},this.findAndAddElements=function(){a.elements=[],document.querySelectorAll(".lax").forEach(function(e){var t=[];e.classList.forEach(function(e){e.includes("lax_preset")&&(e=e.replace("lax_preset_",""),r(e)&&t.push(e))});var n=((n={}).scrollY={presets:t},n);a.elements.push(new d(".lax",a,e,n,0))})},this.addElements=function(n,r,i){document.querySelectorAll(n).forEach(function(e,t){a.elements.push(new d(n,a,e,r,t,i))})},this.removeElements=function(t){a.elements=a.elements.filter(function(e){return e.selector!==t})},this.addElement=function(e,t,n){a.elements.push(new d("",a,e,t,0,n))},this.removeElement=function(t){a.elements=a.elements.filter(function(e){return e.domElement!==t})}}),a={addElements:a.addElements,removeElements:a.removeElements,removeElement:a.removeElement,addElement:a.addElement,init:a.init,addDriver:a.addDriver,removeDriver:a.removeDriver},"undefined"!=typeof module&&void 0!==module.exports?module.exports=a:window?window.lax=a:global&&(global.lax=a),e("default",a),e("addDriver",a.addDriver),e("addElement",a.addElement),e("addElements",a.addElements),e("removeDriver",a.removeDriver),e("removeElement",a.removeElement),e("removeElements",a.removeElements),e("init",a.init)}}});

